<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Encoding Format Specification &mdash; AI Model Efficiency Toolkit Documentation: ver tf-torch-cpu_1.26.0</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "tex2jax_ignore|mathjax_ignore|document", "processClass": "tex2jax_process|mathjax_process|math|output_area"}})</script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../user_guide/index.html" class="icon icon-home">
            AI Model Efficiency Toolkit
              <img src="../_static/brain_logo.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                tf-torch-cpu_1.26.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/model_quantization.html">Quantization User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_quantization.html#use-cases">Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_quantization.html#aimet-quantization-features">AIMET Quantization Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_quantization.html#aimet-quantization-workflow">AIMET Quantization Workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_quantization.html#debugging-guidelines">Debugging Guidelines</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/model_compression.html">Compression User Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_compression.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_compression.html#use-case">Use Case</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_compression.html#compression-ratio-selection">Compression ratio selection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/visualization_compression.html">Visualization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user_guide/visualization_compression.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_guide/visualization_compression.html#design">Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_guide/visualization_compression.html#compression">Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_guide/visualization_compression.html#starting-a-bokeh-server-session">Starting a Bokeh Server Session:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_guide/visualization_compression.html#how-to-use-the-tool">How to use the tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_compression.html#model-compression">Model Compression</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/weight_svd.html">Weight SVD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/spatial_svd.html">Spatial SVD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/channel_pruning.html">Channel Pruning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user_guide/channel_pruning.html#overall-procedure">Overall Procedure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_guide/channel_pruning.html#channel-selection">Channel Selection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_guide/channel_pruning.html#winnowing">Winnowing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user_guide/channel_pruning.html#weight-reconstruction">Weight Reconstruction</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_compression.html#optional-techniques-to-get-better-compression-results">Optional techniques to get better compression results</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/model_compression.html#rank-rounding">Rank Rounding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/model_compression.html#per-layer-fine-tuning">Per-layer Fine-tuning</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_compression.html#faqs">FAQs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/model_compression.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="torch.html">AIMET APIs for PyTorch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="torch_quantization.html">PyTorch Model Quantization API</a></li>
<li class="toctree-l3"><a class="reference internal" href="torch_compress.html">PyTorch Model Compression API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="torch_compress.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_compress.html#top-level-api-for-compression">Top-level API for Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_compress.html#greedy-selection-parameters">Greedy Selection Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_compress.html#tar-selection-parameters">TAR Selection Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_compress.html#spatial-svd-configuration">Spatial SVD Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_compress.html#weight-svd-configuration">Weight SVD Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_compress.html#channel-pruning-configuration">Channel Pruning Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_compress.html#configuration-definitions">Configuration Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_compress.html#code-examples">Code Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="torch_visualization_compression.html">PyTorch Model Visualization API for Compression</a><ul>
<li class="toctree-l4"><a class="reference internal" href="torch_visualization_compression.html#top-level-api-compression">Top-level API Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_visualization_compression.html#code-examples">Code Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="torch_visualization_quantization.html">PyTorch Model Visualization API for Quantization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="torch_visualization_quantization.html#top-level-api-quantization">Top-level API Quantization</a></li>
<li class="toctree-l4"><a class="reference internal" href="torch_visualization_quantization.html#code-examples">Code Examples</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tensorflow.html">AIMET APIs for TensorFlow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="tensorflow_model_guidelines.html">TensorFlow Model Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflow_quantization.html">TensorFlow Model Quantization API</a></li>
<li class="toctree-l3"><a class="reference internal" href="tensorflow_compress.html">TensorFlow Model Compression API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_compress.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_compress.html#top-level-api-for-compression">Top-level API for Compression</a></li>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_compress.html#greedy-selection-parameters">Greedy Selection Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_compress.html#spatial-svd-configuration">Spatial SVD Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_compress.html#channel-pruning-configuration">Channel Pruning Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_compress.html#configuration-definitions">Configuration Definitions</a></li>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_compress.html#code-examples">Code Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_compress.html#weight-svd-top-level-api">Weight SVD Top-level API</a></li>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_compress.html#code-examples-for-weight-svd">Code Examples for Weight SVD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tensorflow_visualization_quantization.html">TensorFlow Model Visualization API for Quantization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_visualization_quantization.html#top-level-api-for-visualization-of-weight-tensors">Top-level API for Visualization of Weight tensors</a></li>
<li class="toctree-l4"><a class="reference internal" href="tensorflow_visualization_quantization.html#code-examples-for-visualization-of-weight-tensors">Code Examples for Visualization of Weight tensors</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="convert_tf_sess_to_keras.html">Using AIMET Tensorflow APIs with Keras Models</a><ul>
<li class="toctree-l4"><a class="reference internal" href="convert_tf_sess_to_keras.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="convert_tf_sess_to_keras.html#apis">APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="convert_tf_sess_to_keras.html#code-example">Code Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="convert_tf_sess_to_keras.html#utility-functions">Utility Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="keras.html">AIMET APIs for Keras</a><ul>
<li class="toctree-l3"><a class="reference internal" href="keras_quantization.html">Keras Model Quantization API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="onnx.html">AIMET APIs for ONNX</a><ul>
<li class="toctree-l3"><a class="reference internal" href="onnx_quantization.html">ONNX Model Quantization API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../user_guide/examples.html">Examples Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/examples.html#browse-the-notebooks">Browse the notebooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../user_guide/examples.html#running-the-notebooks">Running the notebooks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/examples.html#install-jupyter">Install Jupyter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/examples.html#download-the-example-notebooks-and-related-code">Download the Example notebooks and related code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user_guide/examples.html#run-the-notebooks">Run the notebooks</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../user_guide/index.html">AI Model Efficiency Toolkit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../user_guide/index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Encoding Format Specification</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api_docs/quantization_encoding_specification.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<p id="api-quantization-encoding-spec">AIMET Quantization Simulation determines scale/offset values for activation and parameter tensors in the model.
This scale/offset information is also referred to as ‘quantization encoding’.
When a model is exported from the AIMET Quantization Simulation feature,
an encoding file is also exported that contains quantization encodings for the model.
This encoding file can then be used by an inference runtime when running the model on-target.</p>
<p>The following specification describes the format of this encoding file produced by AIMET.</p>
<div class="section" id="encoding-format-specification">
<h1>Encoding Format Specification<a class="headerlink" href="#encoding-format-specification" title="Permalink to this headline">¶</a></h1>
<p>The encodings from Quantization simulation can be exported for usage on run-time. The encoding file uses a JSON syntax.
The file format is usable with both PyTorch and TensorFlow models, that maps tensor names with the encodings.</p>
</div>
<div class="section" id="versioning">
<h1>1. Versioning<a class="headerlink" href="#versioning" title="Permalink to this headline">¶</a></h1>
<p>Encoding format will follow <code class="docutils literal notranslate"><span class="pre">XX.YY.ZZ</span></code> versioning format as describe below,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">XX</span></code> = Major Revision</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">YY</span></code> = Minor Revision</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ZZ</span></code> = Patching version</p></li>
</ul>
<p>Change in major revision should indicate substantial change to the format, updates to minor version indicates additional information element being added to encoding format and might require update to fully consume the encodings.  The patching version shall be updated to indicate minor updates to quantization simulation e.g. bug fix etc.</p>
</div>
<div class="section" id="version-0-4-0-up-to">
<h1>2. Version 0.4.0 (up to)<a class="headerlink" href="#version-0-4-0-up-to" title="Permalink to this headline">¶</a></h1>
<p>The encoding format as defined below is backward compatible and shall applicable to all exported encoding up to version 0.4. In case, where versioning information is missing the encoding is assumed to follow version 0.4 format.</p>
<div class="section" id="encoding-specification">
<h2>2.1. Encoding Specification<a class="headerlink" href="#encoding-specification" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>“version”: “string”
“activation_encodings”:
{
    &lt;tensor_name&gt;: [Encoding, …]
}
“param_encodings”
{
    &lt;tensor_name&gt;: [Encoding, …]
}
</pre></div>
</div>
<p>Where,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;version”</span></code> is set to “0.4.0”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;tensor_name&gt;</span></code> is a string representing the tensor in onnx or tensorflow graph.</p></li>
</ul>
<p>Encoding is as defined below,</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Encoding</span><span class="p">:{</span>
   <span class="n">bitwidth</span><span class="p">:</span> <span class="n">integer</span>
   <span class="n">is_symmetric</span><span class="p">:</span> <span class="n">string</span>
   <span class="nb">max</span><span class="p">:</span> <span class="nb">float</span>
   <span class="nb">min</span><span class="p">:</span> <span class="nb">float</span>
   <span class="n">offset</span><span class="p">:</span> <span class="n">integer</span>
   <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bitwidth</span></code>: constraints &gt;=4 and &lt;=32</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_symmetric</span></code>: allowed choices “True”, “False”</p></li>
</ul>
<p>if a tensor is assigned <strong>more than one</strong> Encoding then the encoding is at per channel basis.</p>
</div>
<div class="section" id="encoding-file-example-for-pytorch">
<h2>2.2. Encoding File Example for PyTorch<a class="headerlink" href="#encoding-file-example-for-pytorch" title="Permalink to this headline">¶</a></h2>
<p>On PyTorch, the tensor names shall be derived from the ONNX named model representation as depicted below on a sample model.</p>
<a class="reference external image-reference" href="../images/mapping_between_onnx_tensor_names_and_encodings.png"><img alt="Mapping between ONNX tensor names and encodings" src="../_images/mapping_between_onnx_tensor_names_and_encodings.png" /></a>
<p>Given below is the sample format with keys and values for encodings JSON output file on PyTorch.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    “version”: “0.4.0”
    &quot;activation_encodings&quot;: {
        &quot;20&quot;:
        [
            {
                &quot;bitwidth&quot;: 8,
                &quot;is_symmetric&quot;: “False”,
                &quot;max&quot;: 2.6086959838867188,
                &quot;min&quot;: -2.109158515930176,
                &quot;offset&quot;: -114.0,
                &quot;scale&quot;: 0.018501389771699905
            }
        ],
        &quot;21&quot;:
        [
            {
                &quot;bitwidth&quot;: 8,
                &quot;is_symmetric&quot;: “False”,
                &quot;max&quot;: 2.558866932988167,
                &quot;min&quot;: -0.12636379897594452,
                &quot;offset&quot;: -12.0,
                &quot;scale&quot;: 0.010530316270887852
            }
        ],
    },
    &quot;param_encodings&quot;: {
        &quot;conv2.weight&quot;:
        [
            {
                &quot;bitwidth&quot;: 8,
                &quot;is_symmetric&quot;: “False”,
                &quot;max&quot;: 0.06318144500255585,
                &quot;min&quot;: -0.06268782913684845,
                &quot;offset&quot;: -127.0,
                &quot;scale&quot;: 0.0004936049808748066
            }
        ],
        &quot;fc1.weight&quot;:
         [
            {
                &quot;bitwidth&quot;: 8,
                &quot;is_symmetric&quot;: “False”,
                &quot;max&quot;: 0.05589814856648445,
                &quot;min&quot;: -0.05546144023537636,
                &quot;offset&quot;: -127.0,
                &quot;scale&quot;: 0.0004367042565718293
            }
        ],
    }
}
</pre></div>
</div>
</div>
<div class="section" id="encoding-file-example-for-tensorflow">
<h2>2.3. Encoding File Example for TensorFlow<a class="headerlink" href="#encoding-file-example-for-tensorflow" title="Permalink to this headline">¶</a></h2>
<p>Given below is a sample format with the keys and values for encodings on TensorFlow graph (in JSON format).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    “version”: “0.4.0”
    &quot;activation_encodings&quot;: {
        &quot;conv2d/Relu:0&quot;:
        [
            {
                &quot;bitwidth&quot;: 8,
                &quot;is_symmetric&quot;: “False”,
                &quot;max&quot;: 2.184721499681473,
                &quot;min&quot;: -0.10788747668266296,
                &quot;offset&quot;: 11,
                &quot;scale&quot;: 0.0089906234367221
            }
        ],
        &quot;conv2d_1/Relu:0&quot;:
        [
            {
                &quot;bitwidth&quot;: 8,
                &quot;is_symmetric&quot;: “False”,
                &quot;max&quot;: 2.1020304188132286,
                &quot;min&quot;: -0.10380396991968155,
                &quot;offset&quot;: 11,
                &quot;scale&quot;: 0.008650330936207491
            }
        ],
    },
    &quot;param_encodings&quot;: {
        &quot;conv2d/Conv2D/ReadVariableOp:0&quot;:
        [
            {
                &quot;bitwidth&quot;: 8,
                &quot;is_symmetric&quot;: “False”,
                &quot;max&quot;: 0.1462666392326355,
                &quot;min&quot;: -0.1451239287853241,
                &quot;offset&quot;: 126,
                &quot;scale&quot;: 0.0011427081098743512
            }
        ],
        &quot;conv2d_1/Conv2D/ReadVariableOp:0&quot;:
        [
            {
                &quot;bitwidth&quot;: 8,
                &quot;is_symmetric&quot;: “False”,
                &quot;max&quot;: 0.08333279937505722,
                &quot;min&quot;: -0.08268175274133682,
                &quot;offset&quot;: 126,
                &quot;scale&quot;: 0.0006510374592799766
            }
        ]
    }
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="version-0-5-0">
<h1>3. Version 0.5.0<a class="headerlink" href="#version-0-5-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>3.1. Encoding Specification<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>“version”: “string”
“activation_encodings”:
{
    &lt;tensor_name&gt;: [Encoding, …]
}
“param_encodings”
{
    &lt;tensor_name&gt;: [Encoding, …]
}
</pre></div>
</div>
<p>Where,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;version”</span></code> is set to “0.5.0”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;tensor_name&gt;</span></code> is a string representing the tensor in onnx or tensorflow graph.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">‘Encoding’</span></code> structure shall include an encoding field <code class="docutils literal notranslate"><span class="pre">“dtype”</span></code> to specify the datatype used for simulating the tensor.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Encoding</span><span class="p">:{</span>
    <span class="n">dtype</span><span class="p">:</span> <span class="n">string</span>
    <span class="n">bitwidth</span><span class="p">:</span> <span class="n">integer</span>
    <span class="n">is_symmetric</span><span class="p">:</span> <span class="n">string</span>
    <span class="nb">max</span><span class="p">:</span> <span class="nb">float</span>
    <span class="nb">min</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">offset</span><span class="p">:</span> <span class="n">integer</span>
    <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dtype</span></code>: allowed choices “int”, “float”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bitwidth</span></code>: constraints &gt;=4 and &lt;=32</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_symmetric</span></code>: allowed choices “True”, “False”</p></li>
</ul>
<p>when <code class="docutils literal notranslate"><span class="pre">dtype</span></code> is set to <code class="docutils literal notranslate"><span class="pre">‘float’</span></code>, Encoding shall have the following fields</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Encoding</span><span class="p">:{</span>
    <span class="n">dtype</span><span class="p">:</span> <span class="n">string</span>
    <span class="n">bitwidth</span><span class="p">:</span> <span class="n">integer</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bitwidth</span></code> defines the precision of the tensor being generated by the producer and consumed by the
downstream consumer(s).</p>
</div>
<div class="section" id="id2">
<h2>3.2. Encoding File Example for PyTorch<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Given below is a snippet of the sample format with change highlighted.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    “version”: “0.5.0”
    &quot;activation_encodings&quot;: {
        &quot;20&quot;:
        [
            {
                “dtype”: “int”
                &quot;bitwidth&quot;: 8,
                 ...
            }
        ],
         ...
    },
    &quot;param_encodings&quot;: {
        &quot;conv2.weight&quot;:
        [
            {
                “dtype”: “int”
                &quot;bitwidth&quot;: 8,
                ...
            }
        ],
         ...
   }
}
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>3.3. Encoding File Example for TensorFlow<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Given below is a snippet of the sample format with change highlighted.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
    “version”: “0.5.0”
    &quot;activation_encodings&quot;: {
        &quot;conv2d/Relu:0&quot;:
        [
            {
                “dtype”: “float”
                &quot;bitwidth&quot;: 16,
        ],
         ...
    },
    &quot;param_encodings&quot;: {
        &quot;conv2d/Conv2D/ReadVariableOp:0&quot;:
        [
            {
                “dtype”: “float”
                &quot;bitwidth&quot;: 16,
            }
        ],
         ...
}
</pre></div>
</div>
</div>
</div>
<div class="section" id="version-0-6-1">
<h1>4. Version 0.6.1<a class="headerlink" href="#version-0-6-1" title="Permalink to this headline">¶</a></h1>
<p>Adds a new field called <code class="docutils literal notranslate"><span class="pre">quantizer_args</span></code> to all exported encodings files.</p>
<div class="section" id="id4">
<h2>4.1. Encoding Specification<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>“version”: “string”
“activation_encodings”:
{
    &lt;tensor_name&gt;: [Encoding, …]
}
“param_encodings”
{
    &lt;tensor_name&gt;: [Encoding, …]
}
&quot;quantizer_args&quot;:
{
     &quot;activation_bitwidth&quot;: integer,
     &quot;dtype&quot;: string,
     &quot;is_symmetric&quot;: string,
     &quot;param_bitwidth&quot;: integer,
     &quot;per_channel_quantization&quot;: string,
     &quot;quant_scheme&quot;: &quot;string&quot;
}
</pre></div>
</div>
<p>Where,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;version”</span></code> is set to “0.6.1”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;tensor_name&gt;</span></code> is a string representing the tensor in onnx or tensorflow graph.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">‘Encoding’</span></code> structure shall include an encoding field <code class="docutils literal notranslate"><span class="pre">“dtype”</span></code> to specify the datatype used for simulating the tensor.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Encoding</span><span class="p">:{</span>
    <span class="n">dtype</span><span class="p">:</span> <span class="n">string</span>
    <span class="n">bitwidth</span><span class="p">:</span> <span class="n">integer</span>
    <span class="n">is_symmetric</span><span class="p">:</span> <span class="n">string</span>
    <span class="nb">max</span><span class="p">:</span> <span class="nb">float</span>
    <span class="nb">min</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">offset</span><span class="p">:</span> <span class="n">integer</span>
    <span class="n">scale</span><span class="p">:</span> <span class="nb">float</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where,</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dtype</span></code>: allowed choices “int”, “float”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bitwidth</span></code>: constraints &gt;=4 and &lt;=32</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_symmetric</span></code>: allowed choices “True”, “False”</p></li>
</ul>
<p>when <code class="docutils literal notranslate"><span class="pre">dtype</span></code> is set to <code class="docutils literal notranslate"><span class="pre">‘float’</span></code>, Encoding shall have the following fields</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Encoding</span><span class="p">:{</span>
    <span class="n">dtype</span><span class="p">:</span> <span class="n">string</span>
    <span class="n">bitwidth</span><span class="p">:</span> <span class="n">integer</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">bitwidth</span></code> defines the precision of the tensor being generated by the producer and consumed by the
downstream consumer(s).</p>
<p>The <code class="docutils literal notranslate"><span class="pre">quantizer_args</span></code> structure describes the settings used to configure the quantization simulation model, and contains
usable information about how encodings were computed.
The field is auto-populated and should not require a manual edit from users. It can be broken down as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">activation_bitwidth</span></code>: Indicates the bit-width set for all activation encodings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dtype</span></code>: Indicates if computation occurred in floating point or integer precision.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_symmetric</span></code>: If set to true, it indicates that parameter encodings were computed symmetrically.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">param_bitwidth</span></code>: Indicates the bit-width set for all parameter encodings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">per_channel_quantization</span></code>: If set to True, then quantization encodings were computed for each channel axis of the tensor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">quant_scheme</span></code>: Indicates the quantization algorithm used, which may be one of post_training_tf or post_training_tf_enhanced.</p></li>
</ul>
<p>The intended usage of <code class="docutils literal notranslate"><span class="pre">quantizer_args</span></code> is to provide debugging information for customers who may need to perform
post-quantization tasks, which could benefit from knowledge of how the encoding information was obtained.</p>
</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Qualcomm Innovation Center, Inc..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>